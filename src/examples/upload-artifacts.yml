description: Build and upload artifacts to Artifactory

usage:
  version: 2.1

  orbs:
    artifactory: jfrog/artifactory-orb@2.0.0

  workflows:
    build-and-upload:
      jobs:
        - artifactory/upload:
            name: Upload Maven Artifacts
            docker-image: cimg/openjdk:17.0
            build-steps:
              - run:
                  name: Build with Maven
                  command: mvn clean package -DskipTests
            source: "target/*.jar"
            target: "libs-release-local/com/mycompany/myapp/"
            context: jfrog-context

